{% extends 'base.html' %}
{% block title %}–ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø–æ–∫–∞–∑–æ–≤{% endblock %}
{% block content %}
<div class="calendar-container">
	<h2 style="margin-bottom: 2rem; color: var(--text);">üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø–æ–∫–∞–∑–æ–≤</h2>
	
	<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 3rem;">
		<div>
			<div class="card" style="margin-bottom: 0;">
				<h3 style="margin-bottom: 1.5rem;">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∫–∞–∑</h3>
				<form method="post" class="stack">
					<label>
						<span>–û–±—ä–µ–∫—Ç –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ *</span>
						<select name="property_id" required>
							<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ–±—ä–µ–∫—Ç</option>
							{% for prop in properties %}
								<option value="{{ prop.id }}">{{ prop.title }} - {{ prop.city }}</option>
							{% endfor %}
						</select>
					</label>
					
					<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
						<label>
							<span>–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞ *</span>
							<input name="client_name" required placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤">
						</label>
						<label>
							<span>–¢–µ–ª–µ—Ñ–æ–Ω</span>
							<input type="tel" name="client_phone" placeholder="+373 XX XXX XXX">
						</label>
					</div>
					
					<label>
						<span>Email –∫–ª–∏–µ–Ω—Ç–∞</span>
						<input type="email" name="client_email" placeholder="client@email.com">
					</label>
					
					<label>
						<span>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø–æ–∫–∞–∑–∞ *</span>
						<input type="datetime-local" name="scheduled_at" required>
					</label>
					
					<label>
						<span>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ</span>
						<textarea name="note" rows="3" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–∫–∞–∑–µ"></textarea>
					</label>
					
					<button type="submit">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∫–∞–∑</button>
				</form>
			</div>
		</div>
		
		<div>
			<div class="card" style="margin-bottom: 0;">
				<h3 style="margin-bottom: 1.5rem;">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–∫–∞–∑—ã</h3>
				{% if appointments %}
					<div style="max-height: 500px; overflow-y: auto;">
						{% for apt in appointments %}
						<div class="appointment-item">
							<div class="appointment-time">
								üìÖ {{ apt['scheduled_at'] }}
							</div>
							<div class="appointment-property">
								üè† {{ apt['property']['title'] if apt.get('property') else '–û–±—ä–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω' }}
							</div>
							<div class="appointment-client">
								üë§ {{ apt['client_name'] }}
								{% if apt.get('client_phone') %} ‚Ä¢ {{ apt['client_phone'] }}{% endif %}
								{% if apt.get('client_email') %} ‚Ä¢ {{ apt['client_email'] }}{% endif %}
							</div>
							{% if apt.get('note') %}
							<div style="margin-top: 0.5rem; padding: 0.5rem; background: rgba(255, 255, 255, 0.5); border-radius: 8px; font-size: 0.9rem; color: var(--text-muted);">
								üí¨ {{ apt['note'] }}
							</div>
							{% endif %}
						</div>
						{% endfor %}
					</div>
				{% else %}
					<div style="text-align: center; padding: 3rem; color: var(--text-muted);">
						<span style="font-size: 3rem;">üìÖ</span>
						<p style="margin-top: 1rem;">–ü–æ–∫–∞–∑–æ–≤ –Ω–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ</p>
						<p style="font-size: 0.9rem;">–ó–∞–ø–ª–∞–Ω–∏—Ä—É–π—Ç–µ –ø–µ—Ä–≤—ã–π –ø–æ–∫–∞–∑ —Å–ª–µ–≤–∞</p>
					</div>
				{% endif %}
			</div>
		</div>
	</div>
</div>
{% endblock %}